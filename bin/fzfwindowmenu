#!/usr/bin/env bash
# choose X-client and focus to one

declare -a window_ids
declare -A windows
window_ids=$(bspc query -N)

for id in $window_ids; do
    windows[$id]="$(xprop -id $id WM_CLASS | sed "s/.* //g" | tr -d '"')"
done

chosen=$(printf '%s\n' "${windows[@]}" | fzf)
echo -e "${windows[@]}" 

for id in "${!windows[@]}"; do
    if [ "${windows[$id]}" = "$chosen" ]; then
        window_id="$id"
        break
    fi
done

bspc node "$window_id".window --focus

